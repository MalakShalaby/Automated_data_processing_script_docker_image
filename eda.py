# -*- coding: utf-8 -*-
"""eda.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1gcwXwai4cm-oSrJSBM71Zwg1yg8daWgr
"""

import subprocess
import sys
import pandas as pd

# Check if the user provided the dataset file path as an argument
if len(sys.argv) != 2:
    print("Usage: python eda.py <file_path>")
    sys.exit(1)

# Get the file path from the command-line argument
file_path = sys.argv[1]

try:
    # Load the dataset
    df = pd.read_csv(file_path)
    
    # 1. Insight: Get basic statistics about the dataset
    insight_1 = df.describe().to_string()
    # Save the insight as a text file
    with open('eda-in-1.txt', 'w') as file:
        file.write(insight_1)
        
        
    # 2. Insight: Count of unique values in a specific column (e.g., 'Age')
    insight_2 = df['Age'].value_counts().to_string()
    # Save the insight as a text file
    with open('eda-in-2.txt', 'w') as file:
        file.write(insight_2)
        
    # 3. Insight: Summarize missing values in the dataset
    insight_3 = df.isnull().sum().to_string()
    # Save the insight as a text file
    with open('eda-in-3.txt', 'w') as file:
        file.write(insight_3)
        
    print("Exploratory Data Analysis completed and Insights saved to text files.")
    
    # Call the 'vis.py' script using subprocess
except FileNotFoundError:
    print(f"File not found: {file_path}")

except Exception as e:
    print(f"An error occurred: {e}")

subprocess.run(["python3", "vis.py", "titanic.csv"])
